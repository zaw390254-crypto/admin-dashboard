<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>

<style>
:root{
  --bg:#f4f5fb;
  --card:#ffffff;
  --primary:#5f5b7a;
  --border:#e6e6ee;
}
*{box-sizing:border-box;font-family:system-ui}
body{margin:0;background:var(--bg)}

.header{
  background:#fff;padding:14px 16px;
  display:flex;justify-content:space-between;align-items:center;
  border-bottom:1px solid var(--border);
}
.menu-btn{font-size:22px;cursor:pointer}

.menu{display:none;background:#fff;border-bottom:1px solid var(--border)}
.menu a{
  display:block;padding:14px 16px;
  text-decoration:none;color:#000;
  border-top:1px solid var(--border)
}

.card{
  background:#fff;margin:12px;padding:18px;
  border-radius:14px;border:1px solid var(--border)
}

label{display:block;margin:12px;font-weight:600}

.dropdown{
  margin:6px 12px 12px;
  border:1px solid var(--border);
  border-radius:10px;background:#fff;
}
.dropdown-header{
  display:flex;align-items:center;gap:10px;
  padding:12px;cursor:pointer;
}
.dropdown-header img,
.dropdown-item img{width:22px;height:22px}

.dropdown-list{display:none;border-top:1px solid var(--border)}
.dropdown-item{
  display:flex;align-items:center;gap:10px;
  padding:12px;cursor:pointer;
}
.dropdown-item:hover{background:#f2f3ff}

input{
  width:100%;margin:6px 0 12px;
  padding:12px;border-radius:10px;
  border:1px solid var(--border)
}

.info{
  background:#eef0ff;margin:12px;
  padding:14px;border-radius:12px;
  font-size:14px;line-height:1.6
}

.alert{
  display:none;
  margin:12px;
  padding:14px;
  border-radius:12px;
  background:#e6ffe6;
  color:#0a7a2f;
  font-weight:600;
}

button{
  width:calc(100% - 24px);
  margin:12px;padding:14px;
  border:none;border-radius:12px;
  background:var(--primary);
  color:#fff;font-size:16px
}
</style>
</head>

<body>

<div class="header">
  <h3>Order á€á€„á€ºá€›á€”á€º</h3>
  <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
</div>

<div class="menu" id="menu">
  <a href="#">ğŸ›’ Orderá€á€„á€ºá€›á€”á€º</a>
  <a href="order-history.html">ğŸ“¦ Order History á€€á€¼á€Šá€·á€ºá€›á€”á€º</a>
  <a href="deposit.html">ğŸ’³ Deposit / á€„á€½á€±á€‘á€Šá€·á€ºá€›á€”á€º</a>
  <a href="#" onclick="logout()">ğŸšª Logout</a>
</div>

<div class="card">
  <h2 id="usernameText"></h2>
  <p>Welcome to kzboostservice!</p>
</div>

<div class="card">
  <h2 id="balanceText">â‰ˆ Ks0</h2>
  <p>Account balance</p>
</div>

<label>á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</label>
<div class="dropdown">
  <div class="dropdown-header" onclick="toggleCategory()">
    <img id="categoryIcon">
    <span id="selectedCategory"></span>
  </div>
  <div class="dropdown-list" id="categoryList"></div>
</div>

<div class="info" id="serviceInfo"></div>
<div class="alert" id="alertBox"></div>

<label>Average Time
<input id="avgTime" readonly>
</label>

<label>Link
<input id="link" placeholder="https://">
</label>

<label>á€¡á€›á€±á€¡á€á€½á€€á€º
<input id="amount" type="number" oninput="calculatePrice()">
</label>

<label>á€€á€»á€á€„á€·á€ºá€„á€½á€±
<input id="price" readonly>
</label>

<button onclick="placeOrder()">Order á€á€„á€ºá€™á€šá€º</button>

<script>
// ===== USER =====
const username = localStorage.getItem("username") || "testuser";
localStorage.setItem("username", username);
usernameText.innerText = username;

// âœ… PAGE LOAD á€™á€¾á€¬ BALANCE á€€á€­á€¯ localStorage á€€á€”á€± á€•á€¼á€”á€ºá€–á€±á€¬á€º
const savedBalance = Number(localStorage.getItem("balance_" + username) || 0);
balanceText.innerText = "â‰ˆ Ks" + savedBalance;

function getBalance(){
  return Number(localStorage.getItem("balance_" + username) || 0);
}
function setBalance(v){
  localStorage.setItem("balance_" + username, v);
  balanceText.innerText = "â‰ˆ Ks" + v;
}

// ===== SERVICES =====
const services = {
 "Myanmar TikTok Like":{
   id:609, icon:"https://upload.wikimedia.org/wikipedia/en/a/a9/TikTok_logo.svg",
   pricePer1000:2000,min:100,max:1000000,avg:"24 hr",
   info:`<b>609. Myanmar TikTok Likes ğŸ‡²ğŸ‡²</b><br><br>
   ğŸ”¹ á€™á€¼á€”á€ºá€™á€¬á€¡á€€á€±á€¬á€„á€·á€ºá€™á€»á€¬á€¸ 50% â­<br>
   ğŸ”¹ Lifetime refill â™»ï¸<br><br>
   ğŸ’° <b>Ks 2,000 / 1000</b>`
 },
 "TikTok Like":{
   id:942, icon:"https://upload.wikimedia.org/wikipedia/en/a/a9/TikTok_logo.svg",
   pricePer1000:1500,min:100,max:5000000,avg:"2 hr",
   info:`<b>942. TikTok Likes HQ</b><br><br>
   ğŸ”¹ Public linká€–á€¼á€…á€ºá€›á€™á€Šá€º<br>
   ğŸ”¹á€›á€€á€º30á€¡á€á€½á€„á€ºá€¸á€•á€¼á€”á€ºá€€á€»á€•á€«á€€refillá€•á€¼á€”á€ºá€œá€¯á€•á€ºá€”á€­á€¯á€„á€ºá€á€Šá€º<br>
   ğŸ”¹View á€•á€«autoá€á€á€ºá€•á€«á€á€šá€º<br><br>
   ğŸ’° <b>Ks 1,500 / 1000</b>`
 },
 "TikTok View":{
   id:931, icon:"https://upload.wikimedia.org/wikipedia/en/a/a9/TikTok_logo.svg",
   pricePer1000:800,min:1000,max:999999999,avg:"4 hr",
   info:`<b>931. TikTok Views</b><br><br>
    ğŸ”¹  â™»ï¸ Auto Refill ~ System á€˜á€€á€ºá€€ 24 á€”á€¬á€›á€®á€á€á€«á€…á€…á€ºá€•á€«á€á€šá€º<br>
    ğŸ”¹ á€•á€¼á€”á€ºá€€á€»á€á€¬á€™á€¾á€¯á€™á€»á€¬á€¸á€¡á€¬á€¸adminá€…á€®á€œá€¬á€›á€”á€ºá€™á€œá€­á€¯<br>
   ğŸ”¹ Public linká€€á€­á€¯á€á€¬á€•á€­á€¯á€·á€•á€«á‹<br><br>
   ğŸ’° <b>Ks 800 / 1000</b>`
 },
 "TikTok Follower":{
   id:758, icon:"https://upload.wikimedia.org/wikipedia/en/a/a9/TikTok_logo.svg",
   pricePer1000:15000,min:100,max:1000000,avg:"12â€“24 hr",
   info:`<b>758. TikTok Followers</b><br><br>
    ğŸ”¹ á€›á€€á€º30á€¡á€á€½á€„á€ºá€¸á€•á€¼á€”á€ºá€€á€»á€™á€¾á€¯á€™á€»á€¬á€¸á€€á€­á€¯á€¡á€á€™á€²á€·á€•á€¼á€”á€ºá€œá€¯á€•á€ºá€•á€«á€á€Šá€ºá‹<br>
    ğŸ”¹ Tiktok account linká€–á€¼á€…á€ºá€›á€™á€Šá€ºá‹<br>
    ğŸ”¹ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€á€²á€·á€¡á€á€½á€€á€ºâ€Œá€±á€€á€»á€¸á€‡á€°á€¸á€á€„á€ºá€•á€«á€á€šá€ºá‹<br><br>
   ğŸ’° <b>Ks 15,000 / 1000</b>`
 }
};

let currentService;

// Build dropdown
for(let k in services){
  categoryList.innerHTML += `
  <div class="dropdown-item" onclick="selectCategory('${k}')">
    <img src="${services[k].icon}">${k}
  </div>`;
}

function toggleMenu(){menu.style.display=menu.style.display==="block"?"none":"block";}
function toggleCategory(){categoryList.style.display=categoryList.style.display==="block"?"none":"block";}

function selectCategory(name){
  currentService = services[name];
  selectedCategory.innerText = name;
  categoryIcon.src = currentService.icon;
  serviceInfo.innerHTML = currentService.info;
  avgTime.value = currentService.avg;
  amount.placeholder = currentService.min+" - "+currentService.max;
  categoryList.style.display="none";
  calculatePrice();
}

function calculatePrice(){
  let q = +amount.value || 0;
  price.value = "Ks " + Math.floor((q/1000)*currentService.pricePer1000);
}

function generateOrderId(){
  return Math.floor(100000 + Math.random()*900000);
}

// ================= TELEGRAM CONFIG =================
const BOT_TOKEN = "8442153049:AAF8v49tuDYjuIyKGd0PyuMTPPpChV4_io0";
const CHAT_ID = "6140613180";

function sendTelegram(order){
  const text = `
ğŸ“¦ *New Order Received*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ†” Order ID : ${order.id}
ğŸ‘¤ User : ${order.user}
ğŸ“¦ Service : ${order.service}
ğŸ”¢ Amount : ${order.amount}
ğŸ”— Link : ${order.link}
ğŸ’° Cost : Ks ${order.cost}
â± Status : Processing
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  `;

  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: CHAT_ID,
      text: text,
      parse_mode: "Markdown"
    })
  });
}

// ================= PLACE ORDER =================
function placeOrder(){
  alertBox.style.display = "none";

  let q = +amount.value;
  let cost = Math.floor((q/1000) * currentService.pricePer1000);

  if(!link.value || !q){
    alertBox.innerHTML = "âŒ á€•á€¼á€Šá€·á€ºá€…á€¯á€¶á€¡á€±á€¬á€„á€ºá€‘á€Šá€·á€ºá€•á€«";
    alertBox.style.display = "block";
    return;
  }

  if(getBalance() < cost){
    alertBox.innerHTML = "âŒ Balance á€™á€œá€¯á€¶á€œá€±á€¬á€€á€ºá€•á€«";
    alertBox.style.display = "block";
    return;
  }

  // ğŸ’³ Balance á€–á€¼á€á€º
  setBalance(getBalance() - cost);

  const orderId = generateOrderId();

  // â± avg time (minutes)
  let avgMin = 60;
  if(currentService.avg.includes("2")) avgMin = 120;
  if(currentService.avg.includes("4")) avgMin = 240;
  if(currentService.avg.includes("12")) avgMin = 720;

  // ğŸ§¾ Order object
  const order = {
    id: orderId,
    user: username,
    service: `${currentService.id} ${selectedCategory.innerText}`,
    amount: q,
    link: link.value,
    cost: cost,
    createdAt: Date.now(),
    avgMinutes: avgMin
  };

  // ğŸ’¾ Save order
  const orders = JSON.parse(localStorage.getItem("orders") || "[]");
  orders.push(order);
  localStorage.setItem("orders", JSON.stringify(orders));

  // ğŸš€ Telegram á€€á€­á€¯á€•á€­á€¯á€·
  sendTelegram(order);

  // âœ… Success message
  alertBox.innerHTML = `
    âœ… <b>Order á€á€„á€ºá€á€¼á€„á€ºá€¸á€…á€á€„á€ºá€”á€±á€•á€«á€á€Šá€º</b><br><br>
    ğŸ†” Order ID : <b>${orderId}</b><br>
    ğŸ“¦ Service : <b>${order.service}</b><br>
    ğŸ”¢ Amount : <b>${q}</b><br>
    ğŸ”— Link : <b>${link.value}</b>
  `;
  alertBox.style.display = "block";

  amount.value = "";
  link.value = "";
  price.value = "";
}
</script>
<script>
function logout(){
;  
  // ğŸ” Login page á€€á€­á€¯á€•á€¼á€”á€ºá€•á€­á€¯á€·
  window.location.href = "index.html";
}
  </script>
